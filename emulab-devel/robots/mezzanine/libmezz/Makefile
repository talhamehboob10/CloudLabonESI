###########################################################################
# Desc: Makefile for Mezzanine IPC library
# Author: Andrew Howard
# Date: 21 Mar 2001
# CVS: $Id: Makefile,v 1.1 2004-12-12 23:36:33 johnsond Exp $
###########################################################################

include ../Makefile.opt

.SUFFIXES: .c .o

###########################################################################
# Options
###########################################################################

LIB = libmezz.a
OBS = mezz.o

INCLUDES = -I.
CFLAGS = -g3 -Wall -I$(INCLUDES) -DVERSION=\"$(VERSION)\"
LFLAGS = -lm

CC = gcc
MAKEDEP = makedepend


###########################################################################
# Build section
###########################################################################

all: $(LIB)

$(LIB) : $(OBS)
	ar r $(LIB) $(OBS)

%.o : %.c
	${CC} ${CFLAGS} -c $< -o $@

dep:
	$(MAKEDEP) $(INCLUDES) -Y -s "# Dependancies (generated by 'make dep')" *.c 2>/dev/null
	$(RM) -f Makefile.bak

clean:
	rm -f $(LIB) *~ *.o


###########################################################################
# Install
###########################################################################

install:
	$(MKDIR) -p $(INSTALL_INC)
	$(MKDIR) -p $(INSTALL_LIB)	
	$(INSTALL) -m 644 libmezz.a $(INSTALL_LIB)
	$(INSTALL) -m 644 mezz.h $(INSTALL_INC)


# Dependancies (generated by 'make dep')

mezz.o: mezz.h
