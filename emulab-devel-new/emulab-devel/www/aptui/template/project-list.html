<div>
  <table class='tablesorter' id='projects_table'>
    <thead>
      <tr>
	<th>Project</th>
	<th>Group</th>
	<th>Trust</th>
	<th>Leader</th>
	<th>Description</th>
      </tr>
    </thead>
    <tbody>
      <% _.each(projects, function(value, name) { %>
	<tr>
	  <td><a href='show-project.php?project=<%- value.pid %>'>
	    <%= value.pid %></a></td>
	  <td><%= value.pid %></td>
	  <td><%= value.trust %></td>
	  <td style='white-space: nowrap;'>
	    <a href='user-dashboard.php?user=<%- value.leader_idx %>'>
	      <%- value.leader_name %></a></td>	  
	  <td><%- value.description %></td>
	</tr>
	<% if (_.has(value, "subgroups") && value.subgroups.length) { %>	
	  <% _.each(value.subgroups, function(group, gid) { %>
	    <tr>
	      <td><a href='show-project.php?project=<%- value.pid %>'>
		<%= value.pid %></a></td>
	      <td><a href='show-group.php?group=<%- group.gid_idx %>'>
		<%= group.gid %></a></td>
	      <td><%= group.trust %></td>
	      <td style='white-space: nowrap;'>
		<a href='user-dashboard.php?user=<%- group.leader_idx %>'>
		  <%- group.leader_name %></a></td>	  
	      <td><%- group.description %></td>
	    </tr>
	  <% }); %>
	<% } %>
      <% }); %>
    </tbody>
  </table>
</div>


