<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DataqSDK: dsdk.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>dsdk.cpp</h1><div class="fragment"><pre>00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment">                          dsdk.cpp  -  Abstract base class for all devices</span>
00003 <span class="comment">                             -------------------</span>
00004 <span class="comment">    begin                : Wed Jun 9 2004</span>
00005 <span class="comment">    author               : Ioan S. Popescu</span>
00006 <span class="comment"></span>
00007 <span class="comment">Copyright (C) 2004 DATAQ Instruments, Inc. &lt;develop@dataq.com&gt;</span>
00008 <span class="comment"></span>
00009 <span class="comment">This program is free software; you can redistribute it and/or </span>
00010 <span class="comment">modify it under the terms of the GNU General Public License </span>
00011 <span class="comment">as published by the Free Software Foundation; either </span>
00012 <span class="comment">version 2 of the License, or (at your option) any later </span>
00013 <span class="comment">version.</span>
00014 <span class="comment"></span>
00015 <span class="comment">This program is distributed in the hope that it will be useful,</span>
00016 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00017 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00018 <span class="comment">GNU General Public License for more details.</span>
00019 <span class="comment"></span>
00020 <span class="comment">You should have received a copy of the GNU General Public License</span>
00021 <span class="comment">along with this program; if not, write to the Free Software</span>
00022 <span class="comment">Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
00023 <span class="comment"> ***************************************************************************/</span>
00024 
00025 <span class="preprocessor">#include "dsdk.h"</span>
00026 <span class="preprocessor">#include "../constants.h"</span>  <span class="comment">// global constants used by all of DataqSDK</span>
00027 
<a name="l00028"></a><a class="code" href="classdsdk.html#a0">00028</a> <a class="code" href="classdsdk.html#a0">dsdk::dsdk</a>()
00029 {
00030     m_ADChannelCount = 1;
00031     m_ADCounter = 0; <span class="comment">// check formula</span>
00032     m_BurstCounter = 1;  <span class="comment">// check formula</span>
00033     m_EventPoint = 0;
00034     m_MaxBurstRate = 1000.00;
00035     m_SampleRate = 1000.00;
00036     m_TrigHysteresisIdx = 0;
00037     m_TrigLevel = 0;
00038     m_TrigMode = 0;
00039     m_TrigScnChnIdx = 0;
00040     m_TrigSlope = 0;
00041     m_TrigPostLength = 100;
00042     m_TrigPreLength = 100;
00043 
00044     m_ADChannelList = 0;
00045     m_ADDiffList = 0;
00046     m_ADGainList = 0;
00047     m_ADMethodList = 0;
00048 
00049     <a class="code" href="classdsdk.html#p17">m_device_file</a> = 0;
00050     <a class="code" href="classdsdk.html#p18">m_acquiring_data</a> = <span class="keyword">false</span>;
00051     m_last_error = 0;
00052 }
00053 
<a name="l00054"></a><a class="code" href="classdsdk.html#a1">00054</a> <a class="code" href="classdsdk.html#a1">dsdk::~dsdk</a>()
00055 {
00056   <span class="keywordflow">if</span>(m_ADChannelList != 0)
00057   {
00058     <span class="keyword">delete</span> [] m_ADChannelList;
00059     m_ADChannelList = 0;
00060   }
00061   <span class="keywordflow">if</span>(m_ADDiffList != 0)
00062   {
00063     <span class="keyword">delete</span> [] m_ADDiffList;
00064     m_ADDiffList = 0;
00065   }
00066   <span class="keywordflow">if</span>(m_ADGainList != 0)
00067   {
00068     <span class="keyword">delete</span> [] m_ADGainList;
00069     m_ADGainList = 0;
00070   }
00071   <span class="keywordflow">if</span>(m_ADMethodList != 0)
00072   {
00073     <span class="keyword">delete</span> [] m_ADMethodList;
00074     m_ADMethodList = 0;
00075   }
00076   <span class="keywordflow">if</span>(<a class="code" href="classdsdk.html#p17">m_device_file</a> != 0)
00077   {
00078     <span class="keyword">delete</span> [] <a class="code" href="classdsdk.html#p17">m_device_file</a>;
00079     <a class="code" href="classdsdk.html#p17">m_device_file</a> = 0;
00080   }
00081 }
00082 
00083 <span class="comment">// Get Properties</span>
00084 
<a name="l00085"></a><a class="code" href="group__GetProperties.html#ga25">00085</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="group__GetProperties.html#ga25">dsdk::ADChannelCount</a>()
00086 {
00087   m_last_error = ENOSYS;
00088   <span class="keywordflow">return</span> 0;
00089 }
00090 
00091 <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> dsdk::ADCounter()
00092 {
00093   m_last_error = ENOSYS;
00094   <span class="keywordflow">return</span> 0;
00095 }
00096 
<a name="l00097"></a><a class="code" href="group__GetProperties.html#ga27">00097</a> <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="group__GetProperties.html#ga27">dsdk::AvailableData</a>()
00098 {
00099   m_last_error = ENOSYS;
00100   <span class="keywordflow">return</span> 0;
00101 }
00102 
00103 <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> dsdk::BurstCounter()
00104 {
00105   m_last_error = ENOSYS;
00106   <span class="keywordflow">return</span> 0;
00107 }
00108 
<a name="l00109"></a><a class="code" href="group__GetProperties.html#ga29">00109</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="group__GetProperties.html#ga29">dsdk::DeviceFile</a>()
00110 {
00111   <span class="keywordflow">return</span> <a class="code" href="classdsdk.html#p17">m_device_file</a>;
00112 }
00113 
<a name="l00114"></a><a class="code" href="group__GetProperties.html#ga30">00114</a> <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="group__GetProperties.html#ga30">dsdk::EventPoint</a>()
00115 {
00116   m_last_error = ENOSYS;
00117   <span class="keywordflow">return</span> 0;
00118 }
00119 
<a name="l00120"></a><a class="code" href="group__GetProperties.html#ga31">00120</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="group__GetProperties.html#ga31">dsdk::InfoBoardID</a>()
00121 {
00122   m_last_error = ENOSYS;
00123   <span class="keywordflow">return</span> 0;
00124 }
00125 
<a name="l00126"></a><a class="code" href="group__GetProperties.html#ga32">00126</a> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="group__GetProperties.html#ga32">dsdk::InfoPGL</a>()
00127 {
00128   m_last_error = ENOSYS;
00129   <span class="keywordflow">return</span> <span class="keyword">false</span>;
00130 }
00131 
<a name="l00132"></a><a class="code" href="group__GetProperties.html#ga33">00132</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="group__GetProperties.html#ga33">dsdk::InfoRev</a>()
00133 {
00134   m_last_error = ENOSYS;
00135   <span class="keywordflow">return</span> 0;
00136 }
00137 
<a name="l00138"></a><a class="code" href="group__GetProperties.html#ga34">00138</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="group__GetProperties.html#ga34">dsdk::InfoSerial</a>()
00139 {
00140   m_last_error = ENOSYS;
00141   <span class="keywordflow">return</span> 0;
00142 }
00143 
<a name="l00144"></a><a class="code" href="group__GetProperties.html#ga35">00144</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="group__GetProperties.html#ga35">dsdk::MaxBurstRate</a>()
00145 {
00146   m_last_error = ENOSYS;
00147   <span class="keywordflow">return</span> 0;
00148 }
00149 
<a name="l00150"></a><a class="code" href="group__GetProperties.html#ga36">00150</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="group__GetProperties.html#ga36">dsdk::SampleRate</a>()
00151 {
00152   m_last_error = ENOSYS;
00153   <span class="keywordflow">return</span> 0;
00154 }
00155 
00156 <span class="keyword">const</span> <span class="keywordtype">int</span> dsdk::TrigHysteresisIdx()
00157 {
00158   m_last_error = ENOSYS;
00159   <span class="keywordflow">return</span> 0;
00160 }
00161 
00162 <span class="keyword">const</span> <span class="keywordtype">int</span> dsdk::TrigLevel()
00163 {
00164   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00165   <span class="keywordflow">return</span> 0;
00166 }
00167 
00168 <span class="keyword">const</span> <span class="keywordtype">int</span> dsdk::TrigMode()
00169 {
00170   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00171   <span class="keywordflow">return</span> 0;
00172 }
00173 
00174 <span class="keyword">const</span> <span class="keywordtype">int</span> dsdk::TrigScnChnIdx()
00175 {
00176   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00177   <span class="keywordflow">return</span> 0;
00178 }
00179 
00180 <span class="keyword">const</span> <span class="keywordtype">int</span> dsdk::TrigSlope()
00181 {
00182   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00183   <span class="keywordflow">return</span> 0;
00184 }
00185 
00186 <span class="keyword">const</span> <span class="keywordtype">int</span> dsdk::TrigPostLength()
00187 {
00188   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00189   <span class="keywordflow">return</span> 0;
00190 }
00191 
00192 <span class="keyword">const</span> <span class="keywordtype">int</span> dsdk::TrigPreLength()
00193 {
00194   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00195   <span class="keywordflow">return</span> 0;
00196 }
00197 
00198 <span class="comment">// Set Properties</span>
00199 
<a name="l00200"></a><a class="code" href="group__SetProperties.html#ga18">00200</a> <span class="keywordtype">void</span> <a class="code" href="group__GetProperties.html#ga25">dsdk::ADChannelCount</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> ChannelCount)
00201 {
00202   m_last_error = ENOSYS;
00203 }
00204 
00205 <span class="keywordtype">void</span> dsdk::ADCounter(<span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> Counter)
00206 {
00207   m_last_error = ENOSYS;
00208 }
00209 
00210 <span class="keywordtype">void</span> dsdk::BurstCounter(<span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> BurstCounter)
00211 {
00212   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00213 }
00214 
<a name="l00221"></a><a class="code" href="group__SetProperties.html#ga21">00221</a> <span class="keywordtype">void</span> <a class="code" href="group__GetProperties.html#ga29">dsdk::DeviceFile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> DeviceFile)
00222 {
00223   <span class="comment">// allocate space if necessary</span>
00224   <span class="keywordflow">if</span>(<a class="code" href="classdsdk.html#p17">m_device_file</a> == 0)
00225     <a class="code" href="classdsdk.html#p17">m_device_file</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>[DEV_PATH];
00226 
00227   <span class="comment">// copy device file path and name</span>
00228   <span class="keywordtype">int</span> i=0;
00229   <span class="keywordflow">for</span>(i=0; i&lt;DEV_PATH &amp;&amp; DeviceFile[i] != 0; i++)
00230     <a class="code" href="classdsdk.html#p17">m_device_file</a>[i] = DeviceFile[i];
00231   <span class="comment">// ensure the string is null terminating</span>
00232   <a class="code" href="classdsdk.html#p17">m_device_file</a>[i&lt;DEV_PATH?i:i-1] = 0;
00233   <a class="code" href="classdsdk.html#b1">DeviceDisconnect</a>();
00234   <a class="code" href="classdsdk.html#b0">DeviceConnect</a>();
00235 }
00236 
<a name="l00237"></a><a class="code" href="group__SetProperties.html#ga22">00237</a> <span class="keywordtype">void</span> <a class="code" href="group__GetProperties.html#ga30">dsdk::EventPoint</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> EventPnt)
00238 {
00239   m_last_error = ENOSYS;
00240 }
00241 
<a name="l00242"></a><a class="code" href="group__SetProperties.html#ga23">00242</a> <span class="keywordtype">void</span> <a class="code" href="group__GetProperties.html#ga35">dsdk::MaxBurstRate</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> MaxBurstRt)
00243 {
00244   m_last_error = ENOSYS;
00245 }
00246 
<a name="l00247"></a><a class="code" href="group__SetProperties.html#ga24">00247</a> <span class="keywordtype">void</span> <a class="code" href="group__GetProperties.html#ga36">dsdk::SampleRate</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> SampleRt)
00248 {
00249   m_last_error = ENOSYS;
00250 }
00251 
00252 <span class="keywordtype">void</span> dsdk::TrigHysteresisIdx(<span class="keyword">const</span> <span class="keywordtype">int</span> Hidx)
00253 {
00254   m_last_error = ENOSYS;
00255 }
00256 
00257 <span class="keywordtype">void</span> dsdk::TrigLevel(<span class="keyword">const</span> <span class="keywordtype">int</span> Level)
00258 {
00259   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00260 }
00261 
00262 <span class="keywordtype">void</span> dsdk::TrigMode(<span class="keyword">const</span> <span class="keywordtype">int</span> Mode)
00263 {
00264   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00265 }
00266 
00267 <span class="keywordtype">void</span> dsdk::TrigScnChnIdx(<span class="keyword">const</span> <span class="keywordtype">int</span> SCidx)
00268 {
00269   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00270 }
00271 
00272 <span class="keywordtype">void</span> dsdk::TrigSlope(<span class="keyword">const</span> <span class="keywordtype">int</span> Slope)
00273 {
00274   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00275 }
00276 
00277 <span class="keywordtype">void</span> dsdk::TrigPostLength(<span class="keyword">const</span> <span class="keywordtype">int</span> PostLength)
00278 {
00279   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00280 }
00281 
00282 <span class="keywordtype">void</span> dsdk::TrigPreLength(<span class="keyword">const</span> <span class="keywordtype">int</span> PreLength)
00283 {
00284   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00285 }
00286 
00287 <span class="comment">// Methods</span>
00288 
<a name="l00289"></a><a class="code" href="group__Methods.html#ga21">00289</a> <span class="keywordtype">void</span> <a class="code" href="group__Methods.html#ga21">dsdk::ADChannelList</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> *<span class="keyword">const</span> ChannelList)
00290 {
00291   m_last_error = ENOSYS;
00292 }
00293 
00294 <span class="keywordtype">void</span> dsdk::ADDiffList(<span class="keyword">const</span> <span class="keywordtype">int</span> *<span class="keyword">const</span> DiffList)
00295 {
00296   m_last_error = ENOSYS;
00297 }
00298 
00299 <span class="keywordtype">void</span> dsdk::ADGainList(<span class="keyword">const</span> <span class="keywordtype">int</span> *<span class="keyword">const</span> GainList)
00300 {
00301   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00302 }
00303 
<a name="l00304"></a><a class="code" href="group__Methods.html#ga24">00304</a> <span class="keywordtype">void</span> <a class="code" href="group__Methods.html#ga24">dsdk::ADMethodList</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> *<span class="keyword">const</span> MethodList)
00305 {
00306   m_last_error = ENOSYS;
00307 }
00308 
00309 <span class="keywordtype">void</span> dsdk::DAOutput(<span class="keyword">const</span> <span class="keywordtype">int</span> value, <span class="keyword">const</span> <span class="keywordtype">int</span> port)
00310 {
00311   m_last_error = ENOSYS;
00312 }
00313 
<a name="l00314"></a><a class="code" href="classdsdk.html#b0">00314</a> <span class="keywordtype">void</span> <a class="code" href="classdsdk.html#b0">dsdk::DeviceConnect</a>()
00315 {
00316   m_last_error = ENOSYS;
00317 }
00318 
<a name="l00319"></a><a class="code" href="classdsdk.html#b1">00319</a> <span class="keywordtype">void</span> <a class="code" href="classdsdk.html#b1">dsdk::DeviceDisconnect</a>()
00320 {
00321   m_last_error = ENOSYS;
00322 }
00323 
00324 <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> dsdk::DigitalInput()
00325 {
00326   m_last_error = ENOSYS;
00327   <span class="keywordflow">return</span> 0;
00328 }
00329 
00330 <span class="keywordtype">void</span> dsdk::DigitalOutput(<span class="keyword">const</span> <span class="keywordtype">int</span> value)
00331 {
00332   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00333 }
00334 
00335 <span class="keywordtype">void</span> dsdk::GetData()
00336 {
00337   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00338 }
00339 
<a name="l00340"></a><a class="code" href="group__Methods.html#ga29">00340</a> <span class="keywordtype">void</span> <a class="code" href="group__Methods.html#ga29">dsdk::GetDataEx</a>(<span class="keywordtype">short</span> <span class="keywordtype">int</span> *iArray, <span class="keyword">const</span> <span class="keywordtype">int</span> Count)
00341 {
00342   m_last_error = ENOSYS;
00343 }
00344 
00345 <span class="keywordtype">void</span> dsdk::GetDataFrame()
00346 {
00347   m_last_error = ENOSYS;
00348 }
00349 
00350 <span class="keywordtype">void</span> dsdk::GetDataFrameEx(<span class="keywordtype">short</span> <span class="keywordtype">int</span> *iArray, <span class="keyword">const</span> <span class="keywordtype">int</span> Count)
00351 {
00352   <a class="code" href="classdsdk.html#p19">m_last_error</a> = ENOSYS;
00353 }
00354 
<a name="l00355"></a><a class="code" href="group__Methods.html#ga32">00355</a> <span class="keywordtype">void</span> <a class="code" href="group__Methods.html#ga32">dsdk::Start</a>()
00356 {
00357   m_last_error = ENOSYS;
00358 }
00359 
<a name="l00360"></a><a class="code" href="group__Methods.html#ga33">00360</a> <span class="keywordtype">void</span> <a class="code" href="group__Methods.html#ga33">dsdk::Stop</a>()
00361 {
00362   m_last_error = ENOSYS;
00363 }
00364 
00365 <span class="comment">// "Event Occur" Methods</span>
00366 
<a name="l00372"></a><a class="code" href="group__EventOccurMethods.html#ga4">00372</a> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="group__EventOccurMethods.html#ga4">dsdk::ControlError</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span> &amp;Code)
00373 {
00374   <span class="keywordflow">if</span>(m_last_error != 0)
00375   {
00376     Code = m_last_error;
00377     m_last_error = 0;
00378     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00379   }
00380   
00381   <span class="keywordflow">return</span> <span class="keyword">false</span>;
00382 }
00383 
<a name="l00389"></a><a class="code" href="group__EventOccurMethods.html#ga5">00389</a> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="group__EventOccurMethods.html#ga5">dsdk::NewData</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span> &amp;Count)
00390 {
00391   <span class="keywordtype">long</span> <span class="keywordtype">int</span> bytes = <a class="code" href="group__GetProperties.html#ga27">AvailableData</a>();
00392   
00393   <span class="keywordflow">if</span>(m_EventPoint != 0 &amp;&amp; bytes &gt;= m_EventPoint)
00394   {
00395     Count = bytes;
00396     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00397   }
00398   
00399   <span class="keywordflow">return</span> <span class="keyword">false</span>;
00400 }
00401 
<a name="l00413"></a><a class="code" href="group__EventOccurMethods.html#ga6">00413</a> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="group__EventOccurMethods.html#ga6">dsdk::OverRun</a>()
00414 {
00415   m_last_error = ENOSYS;
00416   <span class="keywordflow">return</span> <span class="keyword">false</span>;
00417 }
00418 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Aug 2 09:44:50 2004 for DataqSDK by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
