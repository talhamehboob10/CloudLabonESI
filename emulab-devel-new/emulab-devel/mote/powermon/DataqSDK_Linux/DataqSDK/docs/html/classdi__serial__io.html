<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DataqSDK: di_serial_io class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>di_serial_io Class Reference</h1>Class to handle serial type connections.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="di__serial__io_8h-source.html">di_serial_io.h</a>&gt;</code>
<p>
Collaboration diagram for di_serial_io:<p><center><img src="classdi__serial__io__coll__graph.png" border="0" usemap="#di__serial__io__coll__map" alt="Collaboration graph"></center>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classdi__serial__io-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a0" doxytag="di_serial_io::di_serial_io" ></a>
&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a0">di_serial_io</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple initialization. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a1" doxytag="di_serial_io::~di_serial_io" ></a>
&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a1">~di_serial_io</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close connection. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const u_int16_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a2">connect</a> (const char *const dev_file, const u_int8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Connect to device and set up serial port settings.  <a href="#a2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const u_int16_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a3">disconnect</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Restore original serial port settings and disconnect from device.  <a href="#a3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a4">is_comm_open</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines whether the serial connection is active.  <a href="#a4"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a5">di_read</a> (u_int8_t *data, u_int16_t &amp;amount, const u_int8_t packet_len=2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from serial connection, validate if requested.  <a href="#a5"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a6">di_send</a> (const u_int8_t *const data, u_int16_t &amp;amount, const u_int8_t echo=2, const u_int8_t retry=4)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send data to device.  <a href="#a6"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const int16_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a7">bytes_in_receive</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of bytes in the input buffer.  <a href="#a7"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#a8">flush_receive</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears input buffers.  <a href="#a8"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#d0">di_valid</a> (const u_int8_t *const data, const u_int8_t packet_len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True when packet matches DI signature.  <a href="#d0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#d1">di_synchronize</a> (u_int8_t *data, const u_int8_t data_len, const u_int8_t packet_len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempts to synchronize the input buffer to the beginning of a packet.  <a href="#d1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#d2">di_echo</a> (const u_int8_t *const expected, const u_int8_t amount)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if the 'expected' data is echoed (except NULL).  <a href="#d2"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r0" doxytag="di_serial_io::m_baudrate" ></a>
unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#r0">m_baudrate</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Connection baudrate. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r1" doxytag="di_serial_io::m_comm_fd" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#r1">m_comm_fd</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serial port file descriptor. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r2" doxytag="di_serial_io::m_old_termios" ></a>
termios&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#r2">m_old_termios</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Original serial port settings. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r3" doxytag="di_serial_io::m_old_tiocm" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#r3">m_old_tiocm</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Other original settings. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r4" doxytag="di_serial_io::m_timeout" ></a>
u_int8_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classdi__serial__io.html#r4">m_timeout</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timeout in seconds. <br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class to handle serial type connections. 
<p>
This class handles setting up the port settings, connecting to the device, providing validated reads, send out data, open status, available data points, and some device controlled errors. 
<p>

<p>
Definition at line <a class="el" href="di__serial__io_8h-source.html#l00046">46</a> of file <a class="el" href="di__serial__io_8h-source.html">di_serial_io.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a2" doxytag="di_serial_io::connect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const u_int16_t di_serial_io::connect </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *const&nbsp;</td>
          <td class="mdname" nowrap> <em>dev_file</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>device</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connect to device and set up serial port settings. 
<p>
Returns error codes of internal functions it calls.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>dev_file</em>&nbsp;</td><td>Device file path and name. </td></tr>
    <tr><td valign=top><em>device</em>&nbsp;</td><td>Device code for specific settings. See file comment. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Precondition:</b></dt><dd>Inactive connection. Does not check! </dd></dl>
<dl compact><dt><b>Postcondition:</b></dt><dd>Connection to device file, port set up. </dd></dl>
<dl compact><dt><b>Remarks:</b></dt><dd>This only applies settings, nothing else. It doesn't lock the device file or check if it is locked. It quits on any errors. </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>Errors returned by open()<br>
 Errors returned by tcgetattr()<br>
 Errors returned by cfsetispeed()<br>
 Errors returned by cfsetospeed()<br>
 Errors returned by tcsetattr()<br>
 0 = No error. </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00064">64</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8cpp-source.html#l00442">flush_receive()</a>, <a class="el" href="di__serial__io_8h-source.html#l00083">m_baudrate</a>, <a class="el" href="di__serial__io_8h-source.html#l00084">m_comm_fd</a>, <a class="el" href="di__serial__io_8h-source.html#l00085">m_old_termios</a>, and <a class="el" href="di__serial__io_8h-source.html#l00086">m_old_tiocm</a>.
<p>
Referenced by <a class="el" href="di194_8cpp-source.html#l00593">di194_dsdk::DeviceConnect()</a>.    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classdi__serial__io_a2_cgraph.png" border="0" usemap="#classdi__serial__io_a2_cgraph_map" alt=""></center>
<map name="classdi__serial__io_a2_cgraph_map">
<area href="classdi__serial__io.html#a8" shape="rect" coords="199,7,361,30" alt="">
<area href="classdi__serial__io.html#a7" shape="rect" coords="409,7,596,30" alt="">
</map>
<a class="anchor" name="a3" doxytag="di_serial_io::disconnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const u_int16_t di_serial_io::disconnect </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Restore original serial port settings and disconnect from device. 
<p>
Disconnects at all costs. Returns error codes of internal functions.<p>
<dl compact><dt><b>Precondition:</b></dt><dd>Connected. Does not check! </dd></dl>
<dl compact><dt><b>Postcondition:</b></dt><dd>Not connected. </dd></dl>
<dl compact><dt><b>Remarks:</b></dt><dd>This function attempts to reset the serial port settings. Calling it before <a class="el" href="classdi__serial__io.html#a2">connect()</a> will result in undefined settings. </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>Errors returned by close().<br>
 0 = No error. </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00232">232</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8cpp-source.html#l00442">flush_receive()</a>, <a class="el" href="di__serial__io_8h-source.html#l00084">m_comm_fd</a>, <a class="el" href="di__serial__io_8h-source.html#l00085">m_old_termios</a>, and <a class="el" href="di__serial__io_8h-source.html#l00086">m_old_tiocm</a>.
<p>
Referenced by <a class="el" href="di194_8cpp-source.html#l00640">di194_dsdk::DeviceDisconnect()</a>, and <a class="el" href="di__serial__io_8cpp-source.html#l00041">~di_serial_io()</a>.    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classdi__serial__io_a3_cgraph.png" border="0" usemap="#classdi__serial__io_a3_cgraph_map" alt=""></center>
<map name="classdi__serial__io_a3_cgraph_map">
<area href="classdi__serial__io.html#a8" shape="rect" coords="215,7,377,30" alt="">
<area href="classdi__serial__io.html#a7" shape="rect" coords="425,7,612,30" alt="">
</map>
<a class="anchor" name="a4" doxytag="di_serial_io::is_comm_open" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool di_serial_io::is_comm_open </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines whether the serial connection is active. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>True = Connected.<br>
 False = Not connected. </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00258">258</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8h-source.html#l00084">m_comm_fd</a>.
<p>
Referenced by <a class="el" href="di194_8cpp-source.html#l00202">di194_dsdk::ADChannelCount()</a>, <a class="el" href="di194_8cpp-source.html#l00403">di194_dsdk::ADChannelList()</a>, <a class="el" href="di194_8cpp-source.html#l00593">di194_dsdk::DeviceConnect()</a>, <a class="el" href="di194_8cpp-source.html#l00640">di194_dsdk::DeviceDisconnect()</a>, <a class="el" href="di194_8cpp-source.html#l00142">di194_dsdk::InfoSerial()</a>, <a class="el" href="di194_8cpp-source.html#l00894">di194_dsdk::OverRun()</a>, <a class="el" href="di194_8cpp-source.html#l00822">di194_dsdk::Start()</a>, and <a class="el" href="di194_8cpp-source.html#l00858">di194_dsdk::Stop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="di_serial_io::di_read" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool di_serial_io::di_read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u_int8_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>u_int16_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>amount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>packet_len</em> = 2</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read data from serial connection, validate if requested. 
<p>
Return error codes of internal functions. Function will block until either enough data was read or it timed out, according to m_timeout.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>data</em>&nbsp;</td><td>The data read. </td></tr>
    <tr><td valign=top><em>amount</em>&nbsp;</td><td>The number of bytes to try and read. </td></tr>
    <tr><td valign=top><em>packet_len</em>&nbsp;</td><td>Length of normal packet/scan (bytes). If this value is zero, validation is not performed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Precondition:</b></dt><dd>Connected. Does not check! </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>True = Error occurred.<br>
 False = No error.</dd></dl>
Error codes set:<br>
 ENODATA = Not enough data available.<br>
 Errors returned by read().<br>
 ETIMEDOUT = Timed out before getting requested amount.<br>
 Errors set by <a class="el" href="classdi__serial__io.html#d1">di_serial_io::di_synchronize()</a>.<br>
 0 = No error. 
<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00285">285</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8cpp-source.html#l00495">di_synchronize()</a>, <a class="el" href="di__serial__io_8cpp-source.html#l00466">di_valid()</a>, <a class="el" href="di__serial__io_8h-source.html#l00084">m_comm_fd</a>, and <a class="el" href="di__serial__io_8h-source.html#l00087">m_timeout</a>.
<p>
Referenced by <a class="el" href="di__serial__io_8cpp-source.html#l00527">di_echo()</a>, <a class="el" href="di__serial__io_8cpp-source.html#l00495">di_synchronize()</a>, <a class="el" href="di194_8cpp-source.html#l00685">di194_dsdk::GetDataEx()</a>, and <a class="el" href="di194__commands_8cpp-source.html#l00043">Ncmd()</a>.    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classdi__serial__io_a5_cgraph.png" border="0" usemap="#classdi__serial__io_a5_cgraph_map" alt=""></center>
<map name="classdi__serial__io_a5_cgraph_map">
<area href="classdi__serial__io.html#d1" shape="rect" coords="197,7,368,31" alt="">
<area href="classdi__serial__io.html#d0" shape="rect" coords="217,54,348,78" alt="">
</map>
<a class="anchor" name="a6" doxytag="di_serial_io::di_send" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool di_serial_io::di_send </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const u_int8_t *const&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>u_int16_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>amount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>echo</em> = 2, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>retry</em> = 4</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send data to device. 
<p>
Flushes output buffer before every command. Blocks slightly if device signals its receive buffer is full.<p>
<dl compact><dt><b>Precondition:</b></dt><dd>Connected. Does not check! </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>data</em>&nbsp;</td><td>Pointer to array of data to send. </td></tr>
    <tr><td valign=top><em>amount</em>&nbsp;</td><td>Number of bytes to send. </td></tr>
    <tr><td valign=top><em>echo</em>&nbsp;</td><td>Number of bytes to check for echo (except NULL). </td></tr>
    <tr><td valign=top><em>retry</em>&nbsp;</td><td>Number of times to try checking echo. Value of zero will prevent the entire send from occurring. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True = Error occurred.<br>
 False = No error.</dd></dl>
Error codes set:<br>
 Errors set by write().<br>
 EBADRSVP = Device not responding properly. Bad echo.<br>
 0 = No error. 
<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00367">367</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8cpp-source.html#l00527">di_echo()</a>, <a class="el" href="constants_8h-source.html#l00125">EBADRSVP</a>, <a class="el" href="di__serial__io_8cpp-source.html#l00442">flush_receive()</a>, and <a class="el" href="di__serial__io_8h-source.html#l00084">m_comm_fd</a>.
<p>
Referenced by <a class="el" href="di194__commands_8cpp-source.html#l00079">Ccmd()</a>, <a class="el" href="di194__commands_8cpp-source.html#l00104">Dcmd()</a>, <a class="el" href="di194__commands_8cpp-source.html#l00043">Ncmd()</a>, and <a class="el" href="di194__commands_8cpp-source.html#l00129">Scmd()</a>.    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classdi__serial__io_a6_cgraph.png" border="0" usemap="#classdi__serial__io_a6_cgraph_map" alt=""></center>
<map name="classdi__serial__io_a6_cgraph_map">
<area href="classdi__serial__io.html#d2" shape="rect" coords="213,7,346,31" alt="">
<area href="classdi__serial__io.html#a8" shape="rect" coords="198,54,361,78" alt="">
<area href="classdi__serial__io.html#a5" shape="rect" coords="437,7,568,31" alt="">
<area href="classdi__serial__io.html#d1" shape="rect" coords="645,7,816,31" alt="">
<area href="classdi__serial__io.html#d0" shape="rect" coords="665,54,796,78" alt="">
<area href="classdi__serial__io.html#a7" shape="rect" coords="409,54,596,78" alt="">
</map>
<a class="anchor" name="a7" doxytag="di_serial_io::bytes_in_receive" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const int16_t di_serial_io::bytes_in_receive </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the number of bytes in the input buffer. 
<p>
<dl compact><dt><b>Precondition:</b></dt><dd>Connected. Does not check! </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes in the receive buffer. </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00430">430</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8h-source.html#l00084">m_comm_fd</a>.
<p>
Referenced by <a class="el" href="di194_8cpp-source.html#l00112">di194_dsdk::AvailableData()</a>, <a class="el" href="di__serial__io_8cpp-source.html#l00442">flush_receive()</a>, and <a class="el" href="di194_8cpp-source.html#l00894">di194_dsdk::OverRun()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="di_serial_io::flush_receive" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void di_serial_io::flush_receive </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clears input buffers. 
<p>
<dl compact><dt><b>Precondition:</b></dt><dd>Connected. Does not check! </dd></dl>
<dl compact><dt><b>Remarks:</b></dt><dd>No error checking. </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00442">442</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8cpp-source.html#l00430">bytes_in_receive()</a>, and <a class="el" href="di__serial__io_8h-source.html#l00084">m_comm_fd</a>.
<p>
Referenced by <a class="el" href="di__serial__io_8cpp-source.html#l00064">connect()</a>, <a class="el" href="di__serial__io_8cpp-source.html#l00367">di_send()</a>, and <a class="el" href="di__serial__io_8cpp-source.html#l00232">disconnect()</a>.    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classdi__serial__io_a8_cgraph.png" border="0" usemap="#classdi__serial__io_a8_cgraph_map" alt=""></center>
<map name="classdi__serial__io_a8_cgraph_map">
<area href="classdi__serial__io.html#a7" shape="rect" coords="227,7,414,30" alt="">
</map>
<a class="anchor" name="d0" doxytag="di_serial_io::di_valid" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool di_serial_io::di_valid </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const u_int8_t *const&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>packet_len</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
True when packet matches DI signature. 
<p>
Current signature format is as follows:<br>
 0 = Last bit of first byte in 'packet'<br>
 1 = Last bit of remaining bytes in 'packet'<br>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>data</em>&nbsp;</td><td>The 'packet' to test. </td></tr>
    <tr><td valign=top><em>packet_len</em>&nbsp;</td><td>Normal packet size. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True = 'Packet' is valid.<br>
 False = Failed validation test. </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00466">466</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
Referenced by <a class="el" href="di__serial__io_8cpp-source.html#l00285">di_read()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="di_serial_io::di_synchronize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool di_serial_io::di_synchronize </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u_int8_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>packet_len</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Attempts to synchronize the input buffer to the beginning of a packet. 
<p>
Attempts to synchronize the input buffer to the beginning of a packet, it stores what it thinks is a packet in 'data' while at it. Uses the read function without any validation checking.<p>
<dl compact><dt><b>Precondition:</b></dt><dd>Connected. Does not check! </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>data</em>&nbsp;</td><td>Pointer to array where to store next 'packet'. </td></tr>
    <tr><td valign=top><em>data_len</em>&nbsp;</td><td>Length of data. </td></tr>
    <tr><td valign=top><em>packet_len</em>&nbsp;</td><td>Length of a normal packet/scan (bytes). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>False = Synchronized successfully.<br>
 True = Error occurred. </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00495">495</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8cpp-source.html#l00285">di_read()</a>.
<p>
Referenced by <a class="el" href="di__serial__io_8cpp-source.html#l00285">di_read()</a>.    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classdi__serial__io_d1_cgraph.png" border="0" usemap="#classdi__serial__io_d1_cgraph_map" alt=""></center>
<map name="classdi__serial__io_d1_cgraph_map">
<area href="classdi__serial__io.html#a5" shape="rect" coords="238,7,369,30" alt="">
<area href="classdi__serial__io.html#d0" shape="rect" coords="418,7,549,30" alt="">
</map>
<a class="anchor" name="d2" doxytag="di_serial_io::di_echo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool di_serial_io::di_echo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const u_int8_t *const&nbsp;</td>
          <td class="mdname" nowrap> <em>expected</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>amount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if the 'expected' data is echoed (except NULL). 
<p>
Checks if 'amount' bytes of 'expected' are echoed by the device. The function automatically excludes the beginning NULL.<p>
<dl compact><dt><b>Precondition:</b></dt><dd>Connected. Does not check! </dd></dl>
<dl compact><dt><b>Remarks:</b></dt><dd>The beginning NULL must be in expected. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>expected</em>&nbsp;</td><td>Pointer to array of expected data. </td></tr>
    <tr><td valign=top><em>amount</em>&nbsp;</td><td>Number of bytes to check. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True = Echo matched.<br>
 False = Echo did not match.<br>
 </dd></dl>

<p>
Definition at line <a class="el" href="di__serial__io_8cpp-source.html#l00527">527</a> of file <a class="el" href="di__serial__io_8cpp-source.html">di_serial_io.cpp</a>.
<p>
References <a class="el" href="di__serial__io_8cpp-source.html#l00285">di_read()</a>.
<p>
Referenced by <a class="el" href="di__serial__io_8cpp-source.html#l00367">di_send()</a>.    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classdi__serial__io_d2_cgraph.png" border="0" usemap="#classdi__serial__io_d2_cgraph_map" alt=""></center>
<map name="classdi__serial__io_d2_cgraph_map">
<area href="classdi__serial__io.html#a5" shape="rect" coords="198,7,329,31" alt="">
<area href="classdi__serial__io.html#d1" shape="rect" coords="378,7,549,31" alt="">
<area href="classdi__serial__io.html#d0" shape="rect" coords="398,54,529,78" alt="">
</map>
<hr size="1"><address style="align: right;"><small>Generated on Mon Aug 2 09:45:00 2004 for DataqSDK by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
